<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ´»ãƒ»å­¦ç¿’ç¿’æ…£ç®¡ç†ã‚¢ãƒ—ãƒª</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        /* ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ */
        .login-screen {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            margin: 0 auto;
            text-align: center;
        }

        .login-screen.hidden {
            display: none;
        }

        .login-title {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 30px;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
            text-align: left;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .login-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .login-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .error-message {
            color: #ff4757;
            margin-top: 10px;
            font-weight: bold;
            text-align: center;
        }

        .success-message {
            color: #2ecc71;
            margin-top: 10px;
            font-weight: bold;
            text-align: center;
        }

        /* ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª */
        .main-app {
            display: none;
        }

        .main-app.active {
            display: block;
        }

        .user-info {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }

        .user-details {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .user-role {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .user-id, .login-time {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .permission-denied {
            background: #ffe6e6;
            border: 2px solid #ff4757;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            color: #d63031;
            margin: 20px 0;
        }

        .time-input-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .time-input {
            flex: 1;
            min-width: 150px;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .submit-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .records-list {
            margin-top: 30px;
        }

        .record-item {
            background: #f8f9ff;
            border: 1px solid #e0e6ff;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .record-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .record-date {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
        }

        .record-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .detail-item {
            background: white;
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .detail-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .detail-value {
            font-weight: bold;
            color: #333;
        }

        .comment-section {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .comment-input {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .comment-input input {
            flex: 1;
        }

        .comment-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
        }

        .comment-list {
            margin-top: 10px;
        }

        .comment-item {
            background: rgba(102, 126, 234, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 3px solid #667eea;
        }

        .tasks-section {
            background: rgba(255, 248, 220, 0.8);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .task-input {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .task-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #ff9800;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .admin-panel {
            background: rgba(255, 240, 240, 0.9);
            border: 2px solid #ff9800;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .security-info {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #666;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .login-screen {
                padding: 20px;
                margin: 20px;
            }

            .time-input-group {
                flex-direction: column;
            }

            .record-details {
                grid-template-columns: 1fr;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .user-info {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“š ç”Ÿæ´»ãƒ»å­¦ç¿’ç¿’æ…£ç®¡ç†</h1>
            <p>ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ­ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã§å®‰å…¨ã«è¨˜éŒ²ç®¡ç†</p>
        </div>

        <!-- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
        <div class="login-screen" id="loginScreen">
            <h2 class="login-title">ğŸ” ãƒ­ã‚°ã‚¤ãƒ³</h2>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="userType">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—</label>
                    <select id="userType" name="userType" required>
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="student">ğŸ“ ç”Ÿå¾’</option>
                        <option value="admin">ğŸ‘¨â€ğŸ« ç®¡ç†è€…</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="userId">ãƒ¦ãƒ¼ã‚¶ãƒ¼ID</label>
                    <input type="text" id="userId" name="userId" required 
                           placeholder="ä¾‹: student01, admin01">
                </div>
                
                <div class="form-group">
                    <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="password" id="password" name="password" required 
                           placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
                </div>
                
                <button type="submit" class="login-btn">ğŸ”“ ãƒ­ã‚°ã‚¤ãƒ³</button>
            </form>
            
            <div id="loginMessage"></div>
            
            <div class="security-info">
                <strong>ğŸ”’ ãƒ‡ãƒ¢ç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±:</strong><br>
                <strong>ç”Ÿå¾’:</strong> ID: student01, ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: student123<br>
                <strong>ç®¡ç†è€…:</strong> ID: admin01, ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: admin456<br>
                â€»å®Ÿé‹ç”¨ã§ã¯å®‰å…¨ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„
            </div>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="main-app" id="mainApp">
            <div class="user-info">
                <div class="user-details">
                    <div class="user-role" id="userRole"></div>
                    <div class="user-id" id="userIdDisplay"></div>
                    <div class="login-time" id="loginTime"></div>
                </div>
                <button class="logout-btn" onclick="logout()">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
            </div>

            <div class="main-content">
                <!-- ç”Ÿå¾’ç”¨ç”»é¢ -->
                <div id="studentView">
                    <h2>ğŸ“ ä»Šæ—¥ã®è¨˜éŒ²ã‚’å…¥åŠ›ã—ã‚ˆã†</h2>
                    
                    <form id="recordForm">
                        <div class="time-input-group">
                            <div class="form-group time-input">
                                <label for="wakeTime">ğŸŒ… èµ·åºŠæ™‚é–“</label>
                                <input type="time" id="wakeTime" name="wakeTime" required>
                            </div>
                            <div class="form-group time-input">
                                <label for="sleepTime">ğŸŒ™ å°±å¯æ™‚é–“</label>
                                <input type="time" id="sleepTime" name="sleepTime" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="studyTime">ğŸ“– å‹‰å¼·æ™‚é–“ï¼ˆåˆ†ï¼‰</label>
                            <input type="number" id="studyTime" name="studyTime" min="0" required>
                        </div>

                        <div class="form-group">
                            <label for="studyContent">ğŸ“š å‹‰å¼·å†…å®¹ï¼ˆå…·ä½“çš„ã«ï¼‰</label>
                            <textarea id="studyContent" name="studyContent" rows="3" placeholder="ä¾‹ï¼šæ•°å­¦ã®äºŒæ¬¡é–¢æ•°ã®å•é¡Œé›†20å•ã€è‹±å˜èª50å€‹æš—è¨˜"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="phoneTime">ğŸ“± ã‚¹ãƒãƒ›æ™‚é–“ï¼ˆåˆ†ï¼‰</label>
                            <input type="number" id="phoneTime" name="phoneTime" min="0" required>
                        </div>

                        <div class="form-group">
                            <label for="practiceTime">âš½ éƒ¨æ´»è‡ªä¸»ç·´ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰</label>
                            <input type="number" id="practiceTime" name="practiceTime" min="0" required>
                        </div>

                        <div class="form-group">
                            <label for="practiceContent">ğŸƒâ€â™‚ï¸ è‡ªä¸»ç·´ç¿’å†…å®¹ï¼ˆå…·ä½“çš„ã«ï¼‰</label>
                            <textarea id="practiceContent" name="practiceContent" rows="3" placeholder="ä¾‹ï¼šãƒ©ãƒ³ãƒ‹ãƒ³ã‚°30åˆ†ã€ç­‹ãƒˆãƒ¬ï¼ˆè…¹ç­‹100å›ã€è…•ç«‹ã¦50å›ï¼‰"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="reflection">ğŸ’­ ä»Šæ—¥ã®æ„Ÿæƒ³ãƒ»åçœ</label>
                            <textarea id="reflection" name="reflection" rows="4" placeholder="ä»Šæ—¥é ‘å¼µã£ãŸã“ã¨ã€æ”¹å–„ã—ãŸã„ã“ã¨ã€æ˜æ—¥ã®ç›®æ¨™ãªã©"></textarea>
                        </div>

                        <button type="submit" class="submit-btn">ğŸ“ è¨˜éŒ²ã‚’ä¿å­˜</button>
                    </form>

                    <!-- ã‚¿ã‚¹ã‚¯è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
                    <div class="tasks-section" id="studentTasks" style="display: none;">
                        <h3>ğŸ“‹ ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯</h3>
                        <div id="taskListForStudent" class="task-list"></div>
                    </div>

                    <!-- éå»ã®è¨˜éŒ² -->
                    <div class="records-list">
                        <h3>ğŸ“Š ã‚ãªãŸã®è¨˜éŒ²å±¥æ­´</h3>
                        <div id="studentRecords"></div>
                    </div>
                </div>

                <!-- ç®¡ç†è€…ç”¨ç”»é¢ -->
                <div id="adminView">
                    <div class="admin-panel">
                        <h2>ğŸ‘¨â€ğŸ« ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
                        <p>ğŸ” ç®¡ç†è€…æ¨©é™ã§ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã§ã™ã€‚ç”Ÿå¾’ã®ãƒ‡ãƒ¼ã‚¿é–²è¦§ãƒ»ç®¡ç†ãŒå¯èƒ½ã§ã™ã€‚</p>
                    </div>
                    
                    <!-- çµ±è¨ˆæƒ…å ± -->
                    <div class="stats">
                        <div class="stat-card">
                            <span class="stat-number" id="totalRecords">0</span>
                            <span class="stat-label">ç·è¨˜éŒ²æ•°</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="avgStudyTime">0</span>
                            <span class="stat-label">å¹³å‡å‹‰å¼·æ™‚é–“ï¼ˆåˆ†ï¼‰</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="avgPhoneTime">0</span>
                            <span class="stat-label">å¹³å‡ã‚¹ãƒãƒ›æ™‚é–“ï¼ˆåˆ†ï¼‰</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="avgPracticeTime">0</span>
                            <span class="stat-label">å¹³å‡ç·´ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰</span>
                        </div>
                    </div>

                    <!-- ã‚¿ã‚¹ã‚¯ç®¡ç† -->
                    <div class="tasks-section">
                        <h3>ğŸ“‹ èª²é¡Œç®¡ç†</h3>
                        <div class="task-input">
                            <input type="text" id="newTask" placeholder="æ–°ã—ã„èª²é¡Œã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
                            <button onclick="addTask()" class="comment-btn">ğŸ“ è¿½åŠ </button>
                        </div>
                        <div id="taskList" class="task-list"></div>
                    </div>

                    <!-- è¨˜éŒ²ä¸€è¦§ã¨ã‚³ãƒ¡ãƒ³ãƒˆ -->
                    <div class="records-list">
                        <h3>ğŸ“Š å…¨ç”Ÿå¾’ã®è¨˜éŒ²ã¨ã‚³ãƒ¡ãƒ³ãƒˆ</h3>
                        <div id="adminRecords"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ç®¡ç†
        let currentUser = null;
        let records = [];
        let tasks = [];

        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå®Ÿéš›ã®é‹ç”¨ã§ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ç®¡ç†ï¼‰
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå®Ÿéš›ã®é‹ç”¨ã§ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ç®¡ç†ï¼‰
const users = {
    // ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
    'admin01': {
        id: 'admin01',
        password: 'shoko2153', // â€»é‹ç”¨æ™‚ã¯å¿…ãšå¤‰æ›´ã—ã¦ãã ã•ã„
        role: 'admin',
        name: 'ç®¡ç†è€…01'
    },
    
    // ç”Ÿå¾’ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆã‚°ãƒ«ãƒ¼ãƒ—A: 1-12ç•ªï¼‰
    'student01': { id: 'student01', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’01' },
    'student02': { id: 'student02', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’02' },
    'student03': { id: 'student03', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’03' },
    'student04': { id: 'student04', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’04' },
    'student05': { id: 'student05', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’05' },
    'student06': { id: 'student06', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’06' },
    'student07': { id: 'student07', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’07' },
    'student08': { id: 'student08', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’08' },
    'student09': { id: 'student09', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’09' },
    'student10': { id: 'student10', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’10' },
    'student11': { id: 'student11', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’11' },
    'student12': { id: 'student12', password: '2024shoko', role: 'student', name: 'ç”Ÿå¾’12' },
    
    // ç”Ÿå¾’ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆã‚°ãƒ«ãƒ¼ãƒ—B: 13-24ç•ªï¼‰
    'student13': { id: 'student13', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’13' },
    'student14': { id: 'student14', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’14' },
    'student15': { id: 'student15', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’15' },
    'student16': { id: 'student16', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’16' },
    'student17': { id: 'student17', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’17' },
    'student18': { id: 'student18', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’18' },
    'student19': { id: 'student19', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’19' },
    'student20': { id: 'student20', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’20' },
    'student21': { id: 'student21', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’21' },
    'student22': { id: 'student22', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’22' },
    'student23': { id: 'student23', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’23' },
    'student24': { id: 'student24', password: 'shoko2024', role: 'student', name: 'ç”Ÿå¾’24' }
};

        // æ¨©é™ç®¡ç†
        const permissions = {
            student: {
                canCreateRecord: true,
                canViewOwnRecords: true,
                canViewAllRecords: false,
                canAddComment: false,
                canManageTasks: false,
                canViewStats: false
            },
            admin: {
                canCreateRecord: false,
                canViewOwnRecords: false,
                canViewAllRecords: true,
                canAddComment: true,
                canManageTasks: true,
                canViewStats: true
            }
        };

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            
            // ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleLogin();
            });

            // è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ
            document.getElementById('recordForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveRecord();
            });
        });

        // æ¨©é™ãƒã‚§ãƒƒã‚¯é–¢æ•°
        function hasPermission(action) {
            if (!currentUser) return false;
            return permissions[currentUser.role][action] || false;
        }

        // æ¨©é™ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
        function showPermissionError(action) {
            const message = `âš ï¸ æ¨©é™ã‚¨ãƒ©ãƒ¼: ${action}ã®æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚`;
            alert(message);
            console.warn(`Permission denied: ${currentUser?.id || 'Anonymous'} tried to ${action}`);
        }

        // ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
        function handleLogin() {
            const formData = new FormData(document.getElementById('loginForm'));
            const userType = formData.get('userType');
            const userId = formData.get('userId');
            const password = formData.get('password');
            
            const messageElement = document.getElementById('loginMessage');
            messageElement.innerHTML = '';

            // å…¥åŠ›æ¤œè¨¼
            if (!userType || !userId || !password) {
                showMessage(messageElement, 'å…¨ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚', 'error');
                return;
            }

            // ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼
            const user = users[userId];
            if (!user) {
                showMessage(messageElement, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚', 'error');
                return;
            }

            if (user.password !== password) {
                showMessage(messageElement, 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚', 'error');
                return;
            }

            if (user.role !== userType) {
                showMessage(messageElement, 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚', 'error');
                return;
            }

            // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ
            currentUser = user;
            sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            showMessage(messageElement, 'ãƒ­ã‚°ã‚¤ãƒ³ã«æˆåŠŸã—ã¾ã—ãŸï¼', 'success');
            
            setTimeout(() => {
                showMainApp();
            }, 1000);
        }

        // ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªè¡¨ç¤º
        function showMainApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.add('active');
            
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±è¡¨ç¤º
            document.getElementById('userRole').textContent = 
                currentUser.role === 'student' ? 'ğŸ“ ç”Ÿå¾’' : 'ğŸ‘¨â€ğŸ« ç®¡ç†è€…';
            document.getElementById('userIdDisplay').textContent = 
                `ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: ${currentUser.id}`;
            document.getElementById('loginTime').textContent = 
                `ãƒ­ã‚°ã‚¤ãƒ³æ™‚åˆ»: ${new Date().toLocaleString('ja-JP')}`;
            
            // æ¨©é™ã«å¿œã˜ãŸç”»é¢è¡¨ç¤º
            if (currentUser.role === 'student') {
                document.getElementById('studentView').style.display = 'block';
                document.getElementById('adminView').style.display = 'none';
            } else {
                document.getElementById('studentView').style.display = 'none';
                document.getElementById('adminView').style.display = 'block';
            }
            
            updateDisplay();
        }

        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†
        function logout() {
            if (confirm('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                currentUser = null;
                sessionStorage.removeItem('currentUser');
                
                // ç”»é¢ã‚’ãƒªã‚»ãƒƒãƒˆ
                document.getElementById('mainApp').classList.remove('active');
                document.getElementById('loginScreen').classList.remove('hidden');
                document.getElementById('loginForm').reset();
                document.getElementById('loginMessage').innerHTML = '';
                
                // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
                document.getElementById('recordForm').reset();
            }
        }

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºãƒ˜ãƒ«ãƒ‘ãƒ¼
        function showMessage(element, message, type) {
            element.innerHTML = `<div class="${type}-message">${message}</div>`;
        }

        // è¨˜éŒ²ä¿å­˜ï¼ˆç”Ÿå¾’ã®ã¿ï¼‰
        function saveRecord() {
            if (!hasPermission('canCreateRecord')) {
                showPermissionError('è¨˜éŒ²ã®ä½œæˆ');
                return;
            }
            
            const formData = new FormData(document.getElementById('recordForm'));
            const record = {
                id: Date.now(),
                studentId: currentUser.id,
                date: new Date().toLocaleDateString('ja-JP'),
                timestamp: new Date().toISOString(),
                wakeTime: formData.get('wakeTime'),
                sleepTime: formData.get('sleepTime'),
                studyTime: parseInt(formData.get('studyTime')),
                studyContent: formData.get('studyContent'),
                phoneTime: parseInt(formData.get('phoneTime')),
                practiceTime: parseInt(formData.get('practiceTime')),
                practiceContent: formData.get('practiceContent'),
                reflection: formData.get('reflection'),
                comments: []
            };
            
            records.unshift(record);
            saveData();
            updateDisplay();
            
            // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('recordForm').reset();
            
            alert('è¨˜éŒ²ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼ç¶™ç¶šã—ã¦é ‘å¼µã‚Šã¾ã—ã‚‡ã† ğŸ’ª');
        }

        // ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
        function addComment(recordId, commentText) {
            if (!hasPermission('canAddComment')) {
                showPermissionError('ã‚³ãƒ¡ãƒ³ãƒˆã®è¿½åŠ ');
                return;
            }
            
            if (!commentText.trim()) return;
            
            const record = records.find(r => r.id === recordId);
            if (record) {
                record.comments.push({
                    text: commentText,
                    timestamp: new Date().toLocaleString('ja-JP'),
                    author: `ç®¡ç†è€… (${currentUser.id})`
                });
                saveData();
                updateDisplay();
            }
        }

        // ã‚¿ã‚¹ã‚¯è¿½åŠ ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
        function addTask() {
            if (!hasPermission('canManageTasks')) {
                showPermissionError('ã‚¿ã‚¹ã‚¯ã®ç®¡ç†');
                return;
            }
            
            const taskText = document.getElementById('newTask').value.trim();
            if (!taskText) return;
            
            tasks.push({
                id: Date.now(),
                text: taskText,
                createdAt: new Date().toLocaleDateString('ja-JP'),
                createdBy: currentUser.id
            });
            
            document.getElementById('newTask').value = '';
            saveData();
            updateDisplay();
        }

        // ã‚¿ã‚¹ã‚¯å‰Šé™¤ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
        function removeTask(taskId) {
            if (!hasPermission('canManageTasks')) {
                showPermissionError('ã‚¿ã‚¹ã‚¯ã®ç®¡ç†');
                return;
            }
            
            if (confirm('ã“ã®ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                tasks = tasks.filter(task => task.id !== taskId);
                saveData();
                updateDisplay();
            }
        }

        // è¡¨ç¤ºæ›´æ–°
        function updateDisplay() {
            if (!currentUser) return;
            
            if (currentUser.role === 'student') {
                updateStudentView();
            } else if (currentUser.role === 'admin') {
                updateAdminView();
            }
        }

        // ç”Ÿå¾’ç”»é¢æ›´æ–°
        function updateStudentView() {
            // ã‚¿ã‚¹ã‚¯è¡¨ç¤º
            const taskSection = document.getElementById('studentTasks');
            const taskList = document.getElementById('taskListForStudent');
            
            if (tasks.length > 0) {
                taskSection.style.display = 'block';
                taskList.innerHTML = tasks.map(task => `
                    <div class="task-item">
                        <strong>ğŸ“ ${task.text}</strong>
                        <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                            èª²é¡Œæ—¥: ${task.createdAt}
                        </div>
                    </div>
                `).join('');
            } else {
                taskSection.style.display = 'none';
            }
            
            // è‡ªåˆ†ã®è¨˜éŒ²ã®ã¿è¡¨ç¤º
            const studentRecords = document.getElementById('studentRecords');
            const myRecords = records.filter(r => r.studentId === currentUser.id).slice(0, 10);
            
            if (myRecords.length === 0) {
                studentRecords.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æœ€åˆã®è¨˜éŒ²ã‚’å…¥åŠ›ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>';
                return;
            }
            
            studentRecords.innerHTML = myRecords.map(record => `
                <div class="record-item">
                    <div class="record-date">${record.date}</div>
                    <div class="record-details">
                        <div class="detail-item">
                            <div class="detail-label">èµ·åºŠãƒ»å°±å¯</div>
                            <div class="detail-value">${record.wakeTime} ã€œ ${record.sleepTime}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">å‹‰å¼·æ™‚é–“</div>
                            <div class="detail-value">${record.studyTime}åˆ†</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ã‚¹ãƒãƒ›æ™‚é–“</div>
                            <div class="detail-value">${record.phoneTime}åˆ†</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ç·´ç¿’æ™‚é–“</div>
                            <div class="detail-value">${record.practiceTime}åˆ†</div>
                        </div>
                    </div>
                    ${record.studyContent ? `
                        <div class="detail-item" style="margin-top: 10px;">
                            <div class="detail-label">å‹‰å¼·å†…å®¹</div>
                            <div class="detail-value">${record.studyContent}</div>
                        </div>
                    ` : ''}
                    ${record.practiceContent ? `
                        <div class="detail-item" style="margin-top: 10px;">
                            <div class="detail-label">ç·´ç¿’å†…å®¹</div>
                            <div class="detail-value">${record.practiceContent}</div>
                        </div>
                    ` : ''}
                    ${record.reflection ? `
                        <div class="detail-item" style="margin-top: 10px;">
                            <div class="detail-label">ä»Šæ—¥ã®æ„Ÿæƒ³</div>
                            <div class="detail-value">${record.reflection}</div>
                        </div>
                    ` : ''}
                    ${record.comments.length > 0 ? `
                        <div class="comment-section">
                            <h4>ğŸ’¬ ç®¡ç†è€…ã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ</h4>
                            <div class="comment-list">
                                ${record.comments.map(comment => `
                                    <div class="comment-item">
                                        <strong>${comment.author}:</strong> ${comment.text}
                                        <div style="font-size: 0.8rem; color: #666;">${comment.timestamp}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // ç®¡ç†è€…ç”»é¢æ›´æ–°
        function updateAdminView() {
            if (!hasPermission('canViewStats')) {
                document.querySelector('.stats').innerHTML = '<div class="permission-denied">çµ±è¨ˆæƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“</div>';
            } else {
                updateStats();
            }
            
            if (!hasPermission('canManageTasks')) {
                document.querySelector('.tasks-section').innerHTML = '<div class="permission-denied">ã‚¿ã‚¹ã‚¯ç®¡ç†ã®æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“</div>';
            } else {
                updateTaskList();
            }
            
            if (!hasPermission('canViewAllRecords')) {
                document.getElementById('adminRecords').innerHTML = '<div class="permission-denied">å…¨è¨˜éŒ²ã‚’è¡¨ç¤ºã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“</div>';
            } else {
                updateAdminRecords();
            }
        }

        // çµ±è¨ˆæ›´æ–°
        function updateStats() {
            const totalRecords = records.length;
            const avgStudyTime = totalRecords > 0 ? Math.round(records.reduce((sum, r) => sum + r.studyTime, 0) / totalRecords) : 0;
            const avgPhoneTime = totalRecords > 0 ? Math.round(records.reduce((sum, r) => sum + r.phoneTime, 0) / totalRecords) : 0;
            const avgPracticeTime = totalRecords > 0 ? Math.round(records.reduce((sum, r) => sum + r.practiceTime, 0) / totalRecords) : 0;
            
            document.getElementById('totalRecords').textContent = totalRecords;
            document.getElementById('avgStudyTime').textContent = avgStudyTime;
            document.getElementById('avgPhoneTime').textContent = avgPhoneTime;
            document.getElementById('avgPracticeTime').textContent = avgPracticeTime;
        }

        // ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆæ›´æ–°
        function updateTaskList() {
            const taskList = document.getElementById('taskList');
            taskList.innerHTML = tasks.map(task => `
                <div class="task-item">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>ğŸ“ ${task.text}</strong>
                            <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                                ä½œæˆæ—¥: ${task.createdAt} | ä½œæˆè€…: ${task.createdBy}
                            </div>
                        </div>
                        <button onclick="removeTask(${task.id})" 
                                style="background: #f44336; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-left: 10px;">
                            å‰Šé™¤
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // ç®¡ç†è€…è¨˜éŒ²æ›´æ–°
        function updateAdminRecords() {
            const adminRecords = document.getElementById('adminRecords');
            
            if (records.length === 0) {
                adminRecords.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                return;
            }
            
            // è¨˜éŒ²ã‚’å­¦ç”ŸIDåˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
            const recordsByStudent = records.reduce((groups, record) => {
                const studentId = record.studentId;
                if (!groups[studentId]) {
                    groups[studentId] = [];
                }
                groups[studentId].push(record);
                return groups;
            }, {});
            
            adminRecords.innerHTML = Object.keys(recordsByStudent).map(studentId => `
                <div style="margin-bottom: 40px; border: 2px solid #e0e6ff; border-radius: 15px; padding: 20px;">
                    <h4 style="color: #667eea; margin-bottom: 20px;">ğŸ“š ç”Ÿå¾’: ${studentId}</h4>
                    ${recordsByStudent[studentId].map(record => `
                        <div class="record-item">
                            <div class="record-date">${record.date}</div>
                            <div class="record-details">
                                <div class="detail-item">
                                    <div class="detail-label">èµ·åºŠãƒ»å°±å¯æ™‚é–“</div>
                                    <div class="detail-value">${record.wakeTime} ã€œ ${record.sleepTime}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">å‹‰å¼·æ™‚é–“ãƒ»å†…å®¹</div>
                                    <div class="detail-value">${record.studyTime}åˆ†<br><small>${record.studyContent || 'è¨˜è¼‰ãªã—'}</small></div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">ã‚¹ãƒãƒ›æ™‚é–“</div>
                                    <div class="detail-value">${record.phoneTime}åˆ†</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">ç·´ç¿’æ™‚é–“ãƒ»å†…å®¹</div>
                                    <div class="detail-value">${record.practiceTime}åˆ†<br><small>${record.practiceContent || 'è¨˜è¼‰ãªã—'}</small></div>
                                </div>
                            </div>
                            ${record.reflection ? `
                                <div class="detail-item" style="margin-top: 10px;">
                                    <div class="detail-label">æœ¬äººã®æ„Ÿæƒ³</div>
                                    <div class="detail-value">${record.reflection}</div>
                                </div>
                            ` : ''}
                            
                            <div class="comment-section">
                                <h4>ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆç®¡ç†</h4>
                                <div class="comment-list">
                                    ${record.comments.map(comment => `
                                        <div class="comment-item">
                                            <strong>${comment.author}:</strong> ${comment.text}
                                            <div style="font-size: 0.8rem; color: #666;">${comment.timestamp}</div>
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="comment-input">
                                    <input type="text" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›..." id="comment-${record.id}">
                                    <button class="comment-btn" onclick="addComment(${record.id}, document.getElementById('comment-${record.id}').value); document.getElementById('comment-${record.id}').value=''">
                                        é€ä¿¡
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `).join('');
        }

        // ãƒ‡ãƒ¼ã‚¿ä¿å­˜ï¼ˆãƒ¡ãƒ¢ãƒªå†…ï¼‰
        function saveData() {
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡
            localStorage.setItem('routineAppRecords', JSON.stringify(records));
            localStorage.setItem('routineAppTasks', JSON.stringify(tasks));
        }

        // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        function loadData() {
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const savedRecords = localStorage.getItem('routineAppRecords');
            const savedTasks = localStorage.getItem('routineAppTasks');
            
            records = savedRecords ? JSON.parse(savedRecords) : [
                {
                    id: 1,
                    studentId: 'student01',
                    date: '2024/09/16',
                    timestamp: new Date().toISOString(),
                    wakeTime: '06:30',
                    sleepTime: '23:00',
                    studyTime: 90,
                    studyContent: 'æ•°å­¦ã®äºŒæ¬¡é–¢æ•°ã€è‹±å˜èª50å€‹',
                    phoneTime: 120,
                    practiceTime: 60,
                    practiceContent: 'ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°30åˆ†ã€ç­‹ãƒˆãƒ¬30åˆ†',
                    reflection: 'ä»Šæ—¥ã¯é›†ä¸­ã—ã¦å‹‰å¼·ã§ããŸã€‚æ˜æ—¥ã¯ã‚‚ã†å°‘ã—ã‚¹ãƒãƒ›æ™‚é–“ã‚’æ¸›ã‚‰ã—ãŸã„ã€‚',
                    comments: [
                        {
                            text: 'å‹‰å¼·æ™‚é–“ã—ã£ã‹ã‚Šç¢ºä¿ã§ãã¦ã„ã¾ã™ã­ï¼ã“ã®èª¿å­ã§ç¶™ç¶šã—ã¾ã—ã‚‡ã†ã€‚',
                            timestamp: '2024/09/16 21:00',
                            author: 'ç®¡ç†è€… (admin01)'
                        }
                    ]
                },
                {
                    id: 2,
                    studentId: 'student01',
                    date: '2024/09/15',
                    timestamp: new Date().toISOString(),
                    wakeTime: '06:45',
                    sleepTime: '23:30',
                    studyTime: 75,
                    studyContent: 'è‹±èªã®é•·æ–‡èª­è§£ã€å¤æ–‡ã®åŠ©å‹•è©',
                    phoneTime: 150,
                    practiceTime: 45,
                    practiceContent: 'åŸºç¤ç·´ç¿’ã€ã‚·ãƒ¥ãƒ¼ãƒˆç·´ç¿’',
                    reflection: 'å°‘ã—ç–²ã‚Œã¦ã„ãŸãŒã€ãªã‚“ã¨ã‹å‹‰å¼·æ™‚é–“ã‚’ç¢ºä¿ã§ããŸã€‚',
                    comments: []
                }
            ];
            
            tasks = savedTasks ? JSON.parse(savedTasks) : [
                {
                    id: 1,
                    text: 'æ•°å­¦ã®å®¿é¡Œï¼šå•é¡Œé›†p.50-52ã‚’å®Œäº†ã™ã‚‹',
                    createdAt: '2024/09/16',
                    createdBy: 'admin01'
                },
                {
                    id: 2,
                    text: 'è‹±èªã®å˜èªãƒ†ã‚¹ãƒˆæº–å‚™ï¼šå˜èªå¸³unit5-6ã‚’è¦šãˆã‚‹',
                    createdAt: '2024/09/16',
                    createdBy: 'admin01'
                }
            ];
        }

        // ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å…ƒï¼ˆãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ï¼‰
        window.addEventListener('load', function() {
            const savedUser = sessionStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainApp();
            }
        });

        // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã®ä¸æ­£æ“ä½œã‚’æ¤œå‡º
        let devtoolsOpen = false;
        setInterval(function() {
            if (window.outerHeight - window.innerHeight > 200 || window.outerWidth - window.innerWidth > 200) {
                if (!devtoolsOpen) {
                    devtoolsOpen = true;
                    console.warn('ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š: é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚ä¸æ­£ãªæ“ä½œã¯è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚');
                }
            } else {
                devtoolsOpen = false;
            }
        }, 1000);

        // ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹è©¦è¡Œã®è¨˜éŒ²
        window.addEventListener('error', function(e) {
            if (e.message.includes('permission') || e.message.includes('unauthorized')) {
                console.error('ğŸš¨ ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹è©¦è¡ŒãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ:', e.message);
                // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã—ã¦ãƒ­ã‚°ã«è¨˜éŒ²
            }
        });
    </script>
</body>
</html>